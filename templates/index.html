<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>BroasterÃ­a â€“ Pedidos</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg: #0f1115;
        --card: #161a22;
        --muted: #97a0af;
        --text: #e6e9ef;
      }
      * {
        box-sizing: border-box;
      }
      body {
        font-family: Inter, system-ui, Segoe UI, Roboto, Arial, Helvetica,
          sans-serif;
        background: var(--bg);
        color: var(--text);
        margin: 0;
        padding: 0;
      }
      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }
      h1 {
        margin: 12px 0 6px;
        font-size: 28px;
      }
      .muted {
        color: var(--muted);
        margin-top: 0;
      }
      .card {
        background: var(--card);
        border: 1px solid #212736;
        border-radius: 14px;
        padding: 16px;
        box-shadow: 0 6px 24px rgba(0, 0, 0, 0.35);
        width: 350px;
        max-width: 100%;
      }
      .quick-btn {
        width: 100%;
        padding: 12px;
        border-radius: 12px;
        font-weight: 700;
        border: 1px solid #2c3447;
        background: #1c2230;
        color: #fff;
        cursor: pointer;
        transition: transform 0.06s ease;
      }
      .quick-btn:hover {
        transform: translateY(-2px);
      }
      input {
        background: #0f131b;
        color: #fff;
        border: 1px solid #2c3447;
        border-radius: 10px;
        padding: 10px;
        outline: none;
      }
      .submit {
        padding: 12px 16px;
        border-radius: 12px;
        font-weight: 800;
        border: 1px solid #2c3447;
        background: linear-gradient(180deg, #1f2736, #141a26);
        color: #fff;
        cursor: pointer;
        width: 100%;
      }
      .toast {
        position: fixed;
        right: 16px;
        bottom: 16px;
        background: #0f131b;
        border: 1px solid #2c3447;
        padding: 12px 14px;
        border-radius: 12px;
        display: none;
      }
      #productos {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center; /* centra horizontalmente */
      }

      #productos .card {
        flex: 1 1 calc(33.333% - 20px); /* 3 por fila */
        max-width: 300px;
      }

      #productos img {
        width: 100%;
        height: 250px;
        object-fit: cover;
        border-radius: 12px;
        margin-bottom: 10px;
      }

      .qty {
        display: flex;
        align-items: center;
        gap: 8px;
        margin: 10px 0;
      }

      .qty-input {
        width: 70px;
        text-align: center;
      }
    </style>
  </head>

  <body>
    <!-- Modal de pago (2 pasos) -->
    <div
      id="pay-modal"
      style="
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 9999;
      "
    >
      <div
        style="
          max-width: 520px;
          margin: 5% auto;
          background: #fff;
          color: #111;
          padding: 16px;
          border-radius: 12px;
        "
      >
        <h3 style="margin-top: 0">
          Pagar pedido <span id="pm-order-id"></span>
        </h3>

        <!-- PASO 1: selecciÃ³n -->
        <div id="pm-step1">
          <div style="margin: 8px 0">
            <label
              ><input type="checkbox" id="pm-with-invoice" /> Con factura</label
            >
            <div id="pm-invoice-fields" style="display: none; margin-top: 8px">
              <input
                id="pm-nit"
                placeholder="NIT"
                style="width: 49%; padding: 8px"
              />
              <input
                id="pm-rs"
                placeholder="RazÃ³n Social"
                style="width: 49%; padding: 8px"
              />
            </div>
          </div>

          <div style="margin: 8px 0">
            <strong>MÃ©todo de pago:</strong><br />
            <label
              ><input type="radio" name="pm-method" value="qr" checked />
              QR</label
            >
            <label style="margin-left: 12px"
              ><input type="radio" name="pm-method" value="card" />
              Tarjeta</label
            >
            <label style="margin-left: 12px"
              ><input type="radio" name="pm-method" value="cash" />
              Efectivo</label
            >
          </div>
        </div>

        <!-- PASO 2: resultado -->
        <div
          id="pm-result"
          style="
            display: none;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #fafafa;
          "
        >
          <div id="pm-qr"></div>
          <div id="pm-redirect" style="display: none">
            <p>
              Redirigiendo a checkoutâ€¦
              <a id="pm-redirect-link" href="#" target="_blank" rel="noopener"
                >abrir</a
              >
            </p>
          </div>
          <div id="pm-voucher" style="display: none">
            <p>Tu cÃ³digo: <strong id="pm-voucher-code"></strong></p>
            <small>Vence: <span id="pm-voucher-exp"></span></small>
          </div>
          <div style="margin-top: 8px">
            <button
              id="pm-mock-paid"
              style="
                background: #0a0;
                color: #fff;
                padding: 8px 12px;
                border: 0;
                border-radius: 6px;
                cursor: pointer;
              "
            >
              Marcar como pagado (mock)
            </button>
          </div>
        </div>

        <div
          style="
            margin-top: 12px;
            display: flex;
            gap: 8px;
            justify-content: flex-end;
          "
        >
          <button id="pm-confirm" class="submit" style="width: auto">
            Continuar
          </button>
          <button
            id="pm-cancel"
            class="submit"
            style="width: auto; background: #333"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>
    <div class="container">
      <h1>BroasterÃ­a â€“ Pedidos</h1>
      <p class="muted">
        Elige tu producto, ajusta cantidad y manda el pedido a Google Sheets.
      </p>

      <!-- Contenedor de productos -->
      <div id="productos">
        <!-- Tarjeta 1 -->
        <div class="card product-card" data-item="Combo Ahorro" data-price="26">
          <img
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTcZvab1gjsBcS24jyoa1c9YIK9udFauQAtgA&s"
            alt="Combo Ahorro"
          />
          <h3>Combo Ahorro</h3>
          <div class="muted">Precio unitario: <strong>26 Bs.</strong></div>
          <div class="qty">
            <button class="dec quick-btn">âˆ’</button>
            <input class="qty-input" type="number" min="1" value="1" />
            <button class="inc quick-btn">+</button>
          </div>
          <div>
            <strong>Total: <span class="total-amount">26.00</span> Bs.</strong>
          </div>
          <button class="submit order-btn" type="button">
            AÃ±adir al pedido
          </button>
        </div>

        <!-- Tarjeta 2 -->
        <div class="card product-card" data-item="Alitas BBQ" data-price="22">
          <img
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTcZvab1gjsBcS24jyoa1c9YIK9udFauQAtgA&s"
            alt="Alitas BBQ"
          />
          <h3>Alitas BBQ</h3>
          <div class="muted">Precio unitario: <strong>22 Bs.</strong></div>
          <div class="qty">
            <button class="dec quick-btn">âˆ’</button>
            <input class="qty-input" type="number" min="1" value="1" />
            <button class="inc quick-btn">+</button>
          </div>
          <div>
            <strong>Total: <span class="total-amount">22.00</span> Bs.</strong>
          </div>
          <button class="submit order-btn" type="button">
            AÃ±adir al pedido
          </button>
        </div>

        <!-- Tarjeta 3 -->
        <div
          class="card product-card"
          data-item="Papas Familiares"
          data-price="25"
        >
          <img
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTcZvab1gjsBcS24jyoa1c9YIK9udFauQAtgA&s"
            alt="Papas Familiares"
          />
          <h3>Papas Familiares</h3>
          <div class="muted">Precio unitario: <strong>25 Bs.</strong></div>
          <div class="qty">
            <button class="dec quick-btn">âˆ’</button>
            <input class="qty-input" type="number" min="1" value="1" />
            <button class="inc quick-btn">+</button>
          </div>
          <div>
            <strong>Total: <span class="total-amount">25.00</span> Bs.</strong>
          </div>
          <button class="submit order-btn" type="button">
            AÃ±adir al pedido
          </button>
        </div>

        <div class="card product-card" data-item="Combo Ahorro" data-price="36">
          <img
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTcZvab1gjsBcS24jyoa1c9YIK9udFauQAtgA&s"
            alt="Combo"
            style="
              width: 100%;
              height: 200px;
              object-fit: cover;
              border-radius: 8px;
              margin-bottom: 10px;
            "
          />
          <h3>Combo Cuarto</h3>
          <div>Precio unitario: <strong>36 Bs.</strong></div>

          <div class="qty" style="margin-top: 10px">
            <button class="dec quick-btn">âˆ’</button>
            <input class="qty-input" type="number" min="1" value="1" />
            <button class="inc quick-btn">+</button>
          </div>

          <div style="margin-top: 8px">
            Total: <strong><span class="total-amount">36.00</span> Bs.</strong>
          </div>

          <!-- NUEVO: guarniciones (checkboxes) -->
          <div
            class="sides"
            style="
              margin-top: 10px;
              display: flex;
              flex-direction: column;
              gap: 6px;
            "
          >
            <small class="muted">Guarniciones (opcional):</small>
            <label
              ><input type="checkbox" class="side-option" value="Papas" />
              Papas</label
            >
            <label
              ><input type="checkbox" class="side-option" value="Arroz" />
              Arroz</label
            >
            <label
              ><input type="checkbox" class="side-option" value="Fideo" />
              Fideo</label
            >
            <!-- agrega mÃ¡s si quieres -->
          </div>

          <button class="order-btn submit" style="margin-top: 10px">
            AÃ±adir al pedido
          </button>
        </div>
        <!-- ðŸ” Duplica mÃ¡s tarjetas aquÃ­ -->
      </div>
      <!-- Carrito: resumen y botones -->
      <div id="cartCard" class="card" style="margin-top: 16px">
        <h3>PEDIDO</h3>
        <div id="cartList" style="min-height: 40px">
          No hay artÃ­culos en el carrito.
        </div>

        <div
          style="display: flex; gap: 8px; margin-top: 12px; align-items: center"
        >
          <strong>Total: Bs <span id="cartTotal">0.00</span></strong>
          <div style="flex: 1"></div>
          <button id="btnClearCart" class="submit">Vaciar</button>
          <button
            id="btnSendCart"
            class="submit"
            style="background: linear-gradient(180deg, #2a8, #176)"
          >
            Enviar pedido
          </button>
        </div>
        <small class="muted"
          >Agrega varios productos y presiona "Enviar pedido".</small
        >
      </div>
    </div>

    <div class="toast" id="toast"></div>
    <button id="btnCierre" class="submit">Cerrar ventas del dÃ­a</button>
    <!-- colocar junto al tÃ­tulo o en la parte superior -->
    <div
      style="display: flex; gap: 12px; align-items: center; margin-bottom: 12px"
    >
      <h1 style="margin: 0">BroasterÃ­a â€“ Pedidos</h1>

      <!-- BotÃ³n que abre el tablero en la MISMA pestaÃ±a -->
      <button id="btnGoMeseros" class="submit" style="margin-left: 12px">
        Ir a Meseros
      </button>
      <button id="btnIrPago" class="submit">Ir al pago</button>
    </div>
    <script>
      window.QR_STATIC_URL = "/static/qr/images.jpg";
    </script>
    <script src="/static/main.js"></script>
  </body>
</html>
